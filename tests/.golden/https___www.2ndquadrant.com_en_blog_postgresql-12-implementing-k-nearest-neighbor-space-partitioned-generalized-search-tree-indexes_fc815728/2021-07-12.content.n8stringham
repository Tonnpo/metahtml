<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><script>
function toggleSelectedText(e) {
    if (e.shiftKey) {
        var selection = window.getSelection();
        var range = selection.getRangeAt(0);
        var tags = "p,h1,h2,h3,h4,h5,h6,ul,ol,li,dl,dt,table,tr,td,th,article,main,section,figure,figcaption,aside,section,address,blockquote,code";
        if (range.commonAncestorContainer.getElementsByTagName) {
            var allWithinRangeParent = range.commonAncestorContainer.querySelectorAll(tags);
        }
        else {
            //var allWithinRangeParent = [range.commonAncestorContainer.closest(tags)];
            var allWithinRangeParent = [range.commonAncestorContainer.parentNode.closest(tags)];
        }

        for (var i=0, el; el = allWithinRangeParent[i]; i++) {
          // The second parameter says to include the element
          // even if it's not fully selected
          if (selection.containsNode(el, true) ) {
              el.classList.toggle('rm-manual');
          }
        }
        window.getSelection().removeAllRanges();
    }
};

//var article = document.body.querySelector('article');
document.onmouseup = toggleSelectedText;
document.captureEvents(Event.MOUSEUP);
</script>

<style>
.rm-manual {
    text-decoration: line-through;
    background-color: #faa;
}
</style>
        </head><body><article><p class="rm-manual"> PostgreSQL 12: Implementing K-Nearest Neighbor Space Partitioned Generalized Search Tree Indexes - 2ndQuadrant | PostgreSQL </p>
<h4 class="rm-manual">2ndQuadrant is now part of EDB</h4>
<p class="rm-manual">Bringing together some of the world's top PostgreSQL experts.</p>
<p class="rm-manual">Mission Critical Databases</p>
<ul class="rm-manual">
<li class="rm-manual"><a href="https://www.2ndquadrant.com/en/contact-us/">Contact us</a></li> </ul>
<ul class="rm-manual">
<li class="rm-manual">
<a href="https://www.2ndquadrant.com/en/blog/postgresql-12-implementing-k-nearest-neighbor-space-partitioned-generalized-search-tree-indexes/"><span>EN</span></a> <ul class="rm-manual"> <li class="rm-manual"><a href="https://www.2ndquadrant.com/fr/"><span>FR</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/it/"><span>IT</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/es/"><span>ES</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/de/"><span>DE</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/pt-br/"><span>PT</span></a></li> </ul> </li> </ul>
<ul class="rm-manual">
<li class="rm-manual">
<a href="https://www.2ndquadrant.com/en/services/"><span>Support &amp; Services</span></a> <ul class="rm-manual"> <li class="rm-manual">
<a href="https://www.2ndquadrant.com/en/support/support-postgresql/"><span>Support</span></a> <ul class="rm-manual"> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/support-postgresql/"><span>24/7 PostgreSQL Support</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/support-developer/"><span>Developer Support</span></a></li> </ul> </li> <li class="rm-manual">
<a href="https://www.2ndquadrant.com/en/services/rdba/"><span>DBA Services</span></a> <ul class="rm-manual"> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/services/rdba/"><span>Remote DBA</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/services/monitoring-service/"><span>Database Monitoring</span></a></li> </ul> </li> <li class="rm-manual">
<a href="https://www.2ndquadrant.com/en/services/"><span>Consulting Services</span></a> <ul class="rm-manual"> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/services/postgresql-healthcheck/"><span>Health Check</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/services/postgresql-performance-tuning/"><span>Performance Tuning</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/services/postgresql-security-audit/"><span>Database Security Audit</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/services/upgrade-postgresql/"><span>PostgreSQL Upgrade</span></a></li> </ul> </li> <li class="rm-manual">
<a href="https://www.2ndquadrant.com/en/services/"><span>Migration Services</span></a> <ul class="rm-manual"> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/services/migrate-from-oracle-to-postgresql/"><span>Migrate to PostgreSQL</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/services/postgresql-migration-assessment/"><span>Migration Assessment</span></a></li> </ul> </li> </ul> </li> <li class="rm-manual">
<a href="https://www.2ndquadrant.com/en/resources/"><span>Products</span></a> <ul class="rm-manual"> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/resources/postgres-bdr-2ndquadrant/"><span>Postgres-BDR ¬Æ</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/resources/highly-available-postgresql-clusters/"><span>PostgreSQL High Availability</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/resources/kubernetes-operators-for-highly-available-postgresql-and-bdr/"><span>Kubernetes Operators for BDR &amp; PostgreSQL</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/resources/postgres-cloud-manager/"><span>Managed PostgreSQL in the Cloud</span></a></li> <li class="rm-manual">
<a href="#"><span>Installers</span></a> <ul class="rm-manual"> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/resources/postgresql-installer-2ndquadrant/"><span>Postgres Installer</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/resources/2uda/"><span>2UDA</span></a></li> </ul> </li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/resources/2ndqpostgres/"><span>2ndQPostgres</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/resources/pglogical/"><span>pglogical</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/resources/barman/"><span>Barman</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/resources/repmgr/"><span>repmgr</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/resources/omnidb/"><span>OmniDB</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/resources/postgresql-security-firewall/"><span>SQL Firewall</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/resources/postgres-xl/"><span>Postgres-XL</span></a></li> </ul> </li> <li class="rm-manual">
<a href="#"><span>Downloads</span></a> <ul class="rm-manual"> <li class="rm-manual">
<a href="#"><span>Installers</span></a> <ul class="rm-manual"> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/resources/postgresql-installer-2ndquadrant/"><span>Postgres Installer</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/resources/2uda/"><span>2UDA ‚Äì Unified Data Analytics</span></a></li> </ul> </li> <li class="rm-manual">
<a href="#"><span>Whitepapers</span></a> <ul class="rm-manual"> <li class="rm-manual"><a href="https://resources.2ndquadrant.com/business-case-for-postgresql-support"><span>Business Case for PostgreSQL Support</span></a></li> <li class="rm-manual"><a href="https://info.enterprisedb.com/white-paper_security-best-practices-postgresql.html"><span>Security Best Practices for PostgreSQL</span></a></li> </ul> </li> <li class="rm-manual">
<a href="#"><span>Case Studies</span></a> <ul class="rm-manual"> <li class="rm-manual">
<a href="#"><span>Performance Tuning</span></a> <ul class="rm-manual"> <li class="rm-manual"><a href="https://resources.2ndquadrant.com/benchprep-case-study-download"><span>BenchPrep</span></a></li> <li class="rm-manual"><a href="https://resources.2ndquadrant.com/tastyworks-case-study"><span>tastyworks</span></a></li> </ul> </li> <li class="rm-manual">
<a href="#"><span>Distributed Clusters</span></a> <ul class="rm-manual"> <li class="rm-manual"><a href="https://resources.2ndquadrant.com/clickup-case-study-download"><span>ClickUp</span></a></li> <li class="rm-manual"><a href="https://resources.2ndquadrant.com/european-space-agency-case-study-download"><span>European Space Agency (ESA)</span></a></li> <li class="rm-manual"><a href="https://resources.2ndquadrant.com/telefonica-del-sur-case-study-download"><span>Telef√≥nica del Sur</span></a></li> <li class="rm-manual"><a href="https://resources.2ndquadrant.com/animal-logic-case-study-download"><span>Animal Logic</span></a></li> </ul> </li> <li class="rm-manual">
<a href="#"><span>Database Administration</span></a> <ul class="rm-manual"> <li class="rm-manual"><a href="https://resources.2ndquadrant.com/agilis-systems-case-study-download"><span>Agilis Systems</span></a></li> </ul> </li> <li class="rm-manual">
<a href="#"><span>Professional Training</span></a> <ul class="rm-manual"> <li class="rm-manual"><a href="https://resources.2ndquadrant.com/met-office-case-study-download"><span>Met Office</span></a></li> <li class="rm-manual"><a href="https://resources.2ndquadrant.com/london-partners-case-study-download"><span>London &amp; Partners</span></a></li> </ul> </li> <li class="rm-manual">
<a href="#"><span>Database Upgrades</span></a> <ul class="rm-manual"> <li class="rm-manual"><a href="https://resources.2ndquadrant.com/alfred-wegener-institute-case-study-download"><span>Alfred Wegener Institute (AWI)</span></a></li> </ul> </li> <li class="rm-manual">
<a href="#"><span>Database Migration</span></a> <ul class="rm-manual"> <li class="rm-manual"><a href="https://resources.2ndquadrant.com/igt-case-study-download"><span>International Game Technology (IGT)</span></a></li> <li class="rm-manual"><a href="https://resources.2ndquadrant.com/healthcare-software-systems-case-study-download"><span>Healthcare Software Solutions (HSS)</span></a></li> <li class="rm-manual"><a href="https://resources.2ndquadrant.com/navionics-download-case-study"><span>Navionics</span></a></li> </ul> </li> </ul> </li> </ul> </li> <li class="rm-manual">
<a href="https://www.2ndquadrant.com/en/postgres-learning-center/"><span>Postgres Learning Center</span></a> <ul class="rm-manual"> <li class="rm-manual">
<a href="#"><span>Webinars</span></a> <ul class="rm-manual"> <li class="rm-manual"><a href="https://www.enterprisedb.com/webinars"><span>Upcoming Webinars</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/webinar-library/"><span>Webinar Library</span></a></li> </ul> </li> <li class="rm-manual">
<a href="https://www.2ndquadrant.com/en/whitepapers/"><span>Whitepapers</span></a> <ul class="rm-manual"> <li class="rm-manual"><a href="https://resources.2ndquadrant.com/business-case-for-postgresql-support"><span>Business Case for PostgreSQL Support</span></a></li> <li class="rm-manual"><a href="https://info.enterprisedb.com/white-paper_security-best-practices-postgresql.html"><span>Security Best Practices for PostgreSQL</span></a></li> </ul> </li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/blog/"><span>Blog</span></a></li> <li class="rm-manual">
<a href="https://www.2ndquadrant.com/en/training/"><span>Training</span></a> <ul class="rm-manual"> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/training/training-course-catalog/"><span>Course Catalogue</span></a></li> </ul> </li> <li class="rm-manual">
<a href="https://www.2ndquadrant.com/en/case-studies/"><span>Case Studies</span></a> <ul class="rm-manual"> <li class="rm-manual">
<a><span>Performance Tuning</span></a> <ul class="rm-manual"> <li class="rm-manual"><a href="https://resources.2ndquadrant.com/benchprep-case-study-download"><span>BenchPrep</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/case-studies/performance-tuning/tastyworks-2ndquadrant-postgresql-case-study/"><span>tastyworks</span></a></li> </ul> </li> <li class="rm-manual">
<a><span>Distributed Clusters</span></a> <ul class="rm-manual"> <li class="rm-manual"><a href="https://resources.2ndquadrant.com/clickup-case-study-download"><span>ClickUp</span></a></li> <li class="rm-manual"><a href="https://resources.2ndquadrant.com/european-space-agency-case-study-download"><span>European Space Agency (ESA)</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/case-studies/multi-master-clusters/telefonica-del-sur-postgres-bdr-story-2ndquadrant/"><span>Telef√≥nica del Sur</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/case-studies/multi-master-clusters/animal-logic-2ndquadrant-case-study/"><span>Animal Logic</span></a></li> </ul> </li> <li class="rm-manual">
<a><span>Database Administration</span></a> <ul class="rm-manual"> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/case-studies/database-administration/agilis-systems/"><span>Agilis Systems</span></a></li> </ul> </li> <li class="rm-manual">
<a><span>Professional Training</span></a> <ul class="rm-manual"> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/case-studies/professional-training/met-office-2ndquadrant-case-study/"><span>Met Office</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/case-studies/professional-training/london-partners-2ndquadrant-case-study/"><span>London &amp; Partners</span></a></li> </ul> </li> <li class="rm-manual">
<a><span>Database Upgrades</span></a> <ul class="rm-manual"> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/case-studies/database-upgrades/alfred-wegener-institute-awi/"><span>Alfred Wegener Institute (AWI)</span></a></li> </ul> </li> <li class="rm-manual">
<a><span>Database Migration</span></a> <ul class="rm-manual"> <li class="rm-manual"><a href="https://resources.2ndquadrant.com/igt-case-study-download"><span>International Game Technology (IGT)</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/case-studies/database-migration/healthcare-software-solutions-hss/"><span>Healthcare Software Solutions (HSS)</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/case-studies/database-migration/navionics-2ndquadrant-case-study/"><span>Navionics</span></a></li> </ul> </li> </ul> </li> <li class="rm-manual">
<a href="https://www.2ndquadrant.com/en/books/"><span>Books</span></a> <ul class="rm-manual"> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/books/postgresql-11-administration-cookbook/"><span>PostgreSQL 11 Administration Cookbook</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/books/postgresql-10-administration-cookbook/"><span>PostgreSQL 10 Administration Cookbook</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/books/postgresql-high-availability-cookbook-second-edition/"><span>PostgreSQL High Availability Cookbook ‚Äì 2nd Edition</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/books/postgresql-9-administration-cookbook/"><span>PostgreSQL 9 Administration Cookbook ‚Äì 3rd Edition</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/books/postgresql-server-programming/"><span>PostgreSQL Server Programming Cookbook ‚Äì 2nd Edition</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/books/postgresql-9-cookbook-chinese-edition/"><span>PostgreSQL 9 Cookbook ‚Äì Chinese Edition</span></a></li> </ul> </li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/videos/"><span>Videos</span></a></li> <li class="rm-manual"><a href="https://www.enterprisedb.com/events"><span>Events</span></a></li> <li class="rm-manual">
<a href="https://www.2ndquadrant.com/en/postgresql/"><span>PostgreSQL</span></a> <ul class="rm-manual"> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/postgresql/postgresql-story/"><span>PostgreSQL ‚Äì History</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/postgresql/who-uses-postgresql/"><span>Who uses PostgreSQL?</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/postgresql/postgresql-faq/"><span>PostgreSQL FAQ</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/postgresql/postgresql-vs-mysql/"><span>PostgreSQL vs MySQL</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/postgresql/business-case-postgresql/"><span>The Business Case for PostgreSQL</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/postgresql/postgresql-security-information/"><span>Security Information</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/documents/pg_doc/?utm_campaign=Postgres%20Docs&amp;utm_source=PGDocsMenuItem"><span>Documentation</span></a></li> </ul> </li> </ul> </li> <li class="rm-manual">
<a href="#"><span>About Us</span></a> <ul class="rm-manual"> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/about-2ndquadrant/"><span>About 2ndQuadrant</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/postgresql/2ndquadrants-passion-postgresql/"><span>2ndQuadrant‚Äôs Passion for PostgreSQL</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/news/"><span>News</span></a></li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/careers/"><span>Careers</span></a></li> <li class="rm-manual"><a href="https://www.enterprisedb.com/about"><span>Team Profile</span></a></li> </ul> </li> <li class="rm-manual"><a href="https://www.2ndquadrant.com/en/blog/"><span>Blog</span></a></li> <li class="rm-manual"> <a href="#"> <span> <span> Menu </span> </span> <span>Menu</span> </a> </li>
</ul>
<p class="rm-manual"><span><span>You are here:</span></span> <span><span><a href="https://www.2ndquadrant.com/en/" rel="home"><span>Home</span></a><span>1</span></span></span> <span>/</span> <span><span><a href="https://www.2ndquadrant.com/en/blog/"><span>Blog</span></a><span>2</span></span></span> <span>/</span> <span><span><a href="https://www.2ndquadrant.com/en/blog/category/http2ndquadrant-com/"><span>2ndQuadrant</span></a><span>3</span></span></span> <span>/</span> <span>PostgreSQL 12: Implementing K-Nearest Neighbor Space Partitioned Generalized...</span></p>
<h1 class="rm-manual"> <a href="https://www.2ndquadrant.com/en/blog/postgresql-12-implementing-k-nearest-neighbor-space-partitioned-generalized-search-tree-indexes/" rel="bookmark">PostgreSQL 12: Implementing K-Nearest Neighbor Space Partitioned Generalized Search Tree Indexes </a>
</h1>
<p class="rm-manual"><span>November 5, 2019<span>/</span><span><a href="https://www.2ndquadrant.com/en/blog/postgresql-12-implementing-k-nearest-neighbor-space-partitioned-generalized-search-tree-indexes/#comments">10 Comments</a></span><span>/</span><span>in <a href="https://www.2ndquadrant.com/en/blog/category/http2ndquadrant-com/" rel="tag">2ndQuadrant</a>, <a href="https://www.2ndquadrant.com/en/blog/category/kirks-planetpostgresql/" rel="tag">Kirk‚Äôs PlanetPostgreSQL</a>, <a href="https://www.2ndquadrant.com/en/blog/category/postgresql/" rel="tag">PostgreSQL</a> </span><span>/</span><span>by <span><span><span><a href="https://www.2ndquadrant.com/en/blog/author/kirk-roybal/" rel="author">Kirk Roybal</a></span></span></span></span></span></p>
<h2 class="rm-manual">The value of indexing</h2>
<p>PostgreSQL provides a simple linear distance operator </p>
<code>&lt;-&gt;</code><p> (linear distance). We will use this to find points that are closest to a given location.</p>
<p>PostgreSQL provides a simple linear distance operator the data, and 
performing no optimizations and having no indexes, we see the following 
execution plan:</p>
<code><span>time</span> psql -qtAc <span>"</span> </code><code><span>EXPLAIN</span> (<span>ANALYZE</span> <span>ON</span>, BUFFERS <span>ON</span>) <span>SELECT</span> <span>name</span>, location <span>FROM</span> geonames <span>ORDER</span> <span>BY</span> location &lt;-&gt; <span>'(29.9691,-95.6972)'</span> <span>LIMIT</span> <span>5</span>; </code><code><span>" &lt;-- closing quote</span> </code><code> QUERY PLAN ----------------------------------------------------------------------------------------------------------- Limit (<span>cost=418749.15..418749.73</span> <span>rows=5</span> <span>width=38)</span> (actual <span>time=2553.970..2555.673</span> <span>rows=5</span> <span>loops=1)</span> Buffers: shared <span>hit=100</span> <span>read=272836</span> -&gt; Gather Merge (<span>cost=418749.15..1580358.21</span> <span>rows=9955954</span> <span>width=38)</span> (actual <span>time=2553.969..2555.669</span> <span>rows=5</span> <span>loops=1)</span> Workers Planned: <span>2</span> Workers Launched: <span>2</span> Buffers: shared <span>hit=100</span> <span>read=272836</span> -&gt; Sort (<span>cost=417749.12..430194.06</span> <span>rows=4977977</span> <span>width=38)</span> (actual <span>time=2548.220..2548.221</span> <span>rows=4</span> <span>loops=3)</span> Sort Key: ((location &lt;-&gt; '(<span>29.9691</span>,-<span>95.6972</span>)'::point)) Sort Method: top-N heapsort Memory: <span>25</span>kB Worker <span>0</span>: Sort Method: top-N heapsort Memory: <span>26</span>kB Worker <span>1</span>: Sort Method: top-N heapsort Memory: <span>25</span>kB Buffers: shared <span>hit=100</span> <span>read=272836</span> -&gt; Parallel Seq Scan on geonames (<span>cost=0.00..335066.71</span> <span>rows=4977977</span> <span>width=38)</span> (actual <span>time=0.040..1637.884</span> <span>rows=3982382</span> <span>loops=3)</span> Buffers: shared <span>hit=6</span> <span>read=272836</span> Planning Time: <span>0.493</span> ms Execution Time: <span>2555.737</span> ms real <span>0</span>m2.<span>595</span>s user <span>0</span>m0.<span>011</span>s sys <span>0</span>m0.<span>015</span>s </code><p>and here are the results: (the same results for all requests, so we‚Äôll omit them later.)</p>
<table> <thead> <tr> <th>name</th> <th>location</th> </tr> </thead> <tbody> <tr> <td>Cypress</td> <td>(29.96911,-95.69717)</td> </tr> <tr> <td>Cypress Pointe Baptist Church</td> <td>(29.9732,-95.6873)</td> </tr> <tr> <td>Cypress Post Office</td> <td>(29.9743,-95.67953)</td> </tr> <tr> <td>Hot Wells</td> <td>(29.95689,-95.68189)</td> </tr> <tr> <td>Dry Creek Airport</td> <td>(29.98571,-95.68597)</td> </tr> </tbody> </table>
<p>So, 418749.73 is the OPTIMIZER cost to beat, and it took two and a 
half seconds (2555.673) to execute that query. This is actually a very 
good result, using PostgreSQL with no optimizations at all against an 11
 million row table. This is also why we selected a larger data set, as 
there would be very minimal difference using indexes against less than 
10 millions rows. Parallel sequential scans are fantastic, but that‚Äôs 
another article.</p>
<h2>Adding GiST index</h2>
<p>We begin the optimization process by adding a GiST index. Because our example query has a</p>
<code><span>LIMIT</span> </code><p>clause of 5 items, we have a very 
high selectivity. This will encourage the planner to use an index, so 
we‚Äôll provide one that works fairly well with geometry data.</p>
<code>time psql -qtAc "<span>CREATE</span> <span>INDEX</span> idx_gist_geonames_location <span>ON</span> geonames <span>USING</span> gist(location);" </code><p>The act of creating the index has a bit of an expense.</p>
<code>CREATE INDEX real <span>3</span>m1<span>.988</span>s user <span>0</span>m0<span>.011</span>s sys <span>0</span>m0<span>.014</span>s </code><p>And then run the same query again.</p>
<code><span>time</span> psql -qtAc <span>"</span> </code><code><span>EXPLAIN</span> (<span>ANALYZE</span> <span>ON</span>, BUFFERS <span>ON</span>) <span>SELECT</span> <span>name</span>, location <span>FROM</span> geonames <span>ORDER</span> <span>BY</span> location &lt;-&gt; <span>'(29.9691,-95.6972)'</span> <span>LIMIT</span> <span>5</span>; </code><code><span>"</span> </code><code> QUERY PLAN ---------------------------------------------------------------------------------- Limit (<span>cost=0.42..1.16</span> <span>rows=5</span> <span>width=38)</span> (actual <span>time=0.797..0.881</span> <span>rows=5</span> <span>loops=1)</span> Buffers: shared <span>hit=5</span> <span>read=15</span> -&gt; Index Scan using idx_gist_geonames_location on geonames (<span>cost=0.42..1773715.32</span> <span>rows=11947145</span> <span>width=38)</span> (actual <span>time=0.796..0.879</span> <span>rows=5</span> <span>loops=1)</span> Order By: (location &lt;-&gt; '(<span>29.9691</span>,-<span>95.6972</span>)'::point) Buffers: shared <span>hit=5</span> <span>read=15</span> Planning Time: <span>0.768</span> ms Execution Time: <span>0.939</span> ms real <span>0</span>m0.<span>033</span>s user <span>0</span>m0.<span>011</span>s sys <span>0</span>m0.<span>013</span>s </code><p>In
 this case, we see some pretty dramatic improvement. The estimated cost 
of the query is only 1.16! Compare that to the original cost of the 
unoptimized query at 418749.73. The actual time taken was .939 
milliseconds (nine tenths of a millisecond), which compares to the 2.5 
seconds of the original query. This result took less time to plan, got a
 dramatically better estimate, and took about 3 orders of magnitude less
 runtime.</p>
<p>Let‚Äôs see if we can do better.</p>
<h2>Adding an SP-GiST index</h2>
<code>time psql -qtAc "<span>CREATE</span> <span>INDEX</span> idx_spgist_geonames_location <span>ON</span> geonames <span>USING</span> spgist(location);" </code><code>CREATE INDEX real <span>1</span>m25<span>.205</span>s user <span>0</span>m0<span>.010</span>s sys <span>0</span>m0<span>.015</span>s </code><p>And then we run the same query again.</p>
<code><span>time</span> psql -qtAc <span>"</span> </code><code><span>EXPLAIN</span> (<span>ANALYZE</span> <span>ON</span>, BUFFERS <span>ON</span>) <span>SELECT</span> <span>name</span>, location <span>FROM</span> geonames <span>ORDER</span> <span>BY</span> location &lt;-&gt; <span>'(29.9691,-95.6972)'</span> <span>LIMIT</span> <span>5</span>; </code><code><span>"</span> </code><code> QUERY PLAN ----------------------------------------------------------------------------------- Limit (<span>cost=</span><span>0.42</span>..<span>1.09</span> <span>rows=</span><span>5</span> <span>width=</span><span>38</span>) (actual <span>time=</span><span>0.066</span>..<span>0.323</span> <span>rows=</span><span>5</span> <span>loops=</span><span>1</span>) Buffers: shared <span>hit=</span><span>47</span> -&gt; Index Scan using idx_spgist_geonames_location on geonames (<span>cost=</span><span>0.42</span>..<span>1598071.32</span> <span>rows=</span><span>11947145</span> <span>width=</span><span>38</span>) (actual <span>time=</span><span>0.065</span>..<span>0.320</span> <span>rows=</span><span>5</span> <span>loops=</span><span>1</span>) <span>Order</span> <span>By</span>: (<span>location</span> <span>&lt;-&gt; '(29</span>.<span>9691</span>,-<span>95.6972</span>)'::point) Buffers: shared <span>hit=</span><span>47</span> Planning Time: <span>0.122</span> <span>ms</span> <span>Execution</span> Time: <span>0.358</span> <span>ms</span> <span>(7</span> rows) real <span>0m</span>0.<span>040s</span> <span>user</span> <span>0m0</span>.<span>011s</span> sys <span>0m</span>0.<span>015s</span> </code><p>Wow! Now using an SP-GiST index, the query cost only 1.09, and executed in .358 milliseconds (a third of a millisecond).</p>
<p>Let‚Äôs examine some things about the indexes themselves, and see how they stack up to each other on disk.</p>
<h2>Index comparisons</h2>
<table> <thead> <tr> <th>indexname</th> <th>creation time</th> <th>estimate</th> <th>query time</th> <th>indexsize</th> <th>plan time</th> </tr> </thead> <tbody> <tr> <td>unindexed</td> <td>0S</td> <td>418749.73</td> <td>2555.673</td> <td>0</td> <td>.493</td> </tr> <tr> <td>idx_gist_geonames_location</td> <td>3M 1S</td> <td>1.16</td> <td>.939 ms</td> <td>868 MB</td> <td>.786</td> </tr> <tr> <td>idx_spgist_geonames_location</td> <td>1M 25S</td> <td>1.09</td> <td>.358 ms</td> <td>523 MB</td> <td>.122</td> </tr> </tbody> </table>
<h2>Conclusions</h2>
<p>So, we see that SP-GiST is twice the speed of GiST in execution, 8x 
faster to plan, and about 60% of the size on disk. And (relevant to this
 article) it also supports KNN index searching as of PostgreSQL 12. For 
this type of operation, we have a clear winner.</p>
<h1>Appendices</h1>
<h2>Setting up the data</h2>
<p>For this article, we are going to use the data provided by the GeoNames Gazetteer.</p>
<p> This work is licensed under a <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 License</a></p>
<p> The Data is provided ‚Äúas is‚Äù without warranty or any representation of accuracy, timeliness or completeness.</p>
<h2>Create the structure</h2>
<p>We start the process by creating a working directory and a little bit of ETL.</p>
<code><span># change to our home directory</span> <span>cd</span> mkdir spgist <span>cd</span> spgist <span># get the base data. </span> <span># This file is 350MB. It will unpack to 1.5GB</span> <span># It will expand to 2GB in PostgreSQL,</span> <span># and then you will still need some room for indexes</span> <span># All together, you will need about </span> <span># 3GB of space for this exercise</span> <span># for about 12M rows of data.</span> psql -qtAc <span>"</span> </code><code><span>CREATE</span> <span>TABLE</span> <span>IF</span> <span>NOT</span> <span>EXISTS</span> geonames ( geonameid <span>integer</span> primary <span>key</span> ,<span>name</span> <span>text</span> ,asciiname <span>text</span> ,alternatenames <span>text</span> ,latitude <span>numeric</span>(<span>13</span>,<span>5</span>) ,longitude <span>numeric</span>(<span>13</span>,<span>5</span>) ,feature_class <span>text</span> ,feature_code <span>text</span> ,country <span>text</span> ,cc2 <span>text</span> ,admin1 <span>text</span> ,admin2 <span>bigint</span> ,admin3 <span>bigint</span> ,admin4 <span>bigint</span> ,population <span>bigint</span> ,elevation <span>bigint</span> ,dem <span>bigint</span> ,timezone <span>text</span> ,<span>modification</span> <span>date</span> ); <span>COMMENT</span> <span>ON</span> <span>COLUMN</span> geonames.geonameid <span>IS</span> <span>' integer id of record in geonames database'</span>; <span>COMMENT</span> <span>ON</span> <span>COLUMN</span> geonames.name <span>IS</span> <span>' name of geographical point (utf8) varchar(200)'</span>; <span>COMMENT</span> <span>ON</span> <span>COLUMN</span> geonames.asciiname <span>IS</span> <span>' name of geographical point in plain ascii characters, varchar(200)'</span>; <span>COMMENT</span> <span>ON</span> <span>COLUMN</span> geonames.alternatenames <span>IS</span> <span>'
 alternatenames, comma separated, ascii names automatically 
transliterated, convenience attribute from alternatename table, 
varchar(10000)'</span>; <span>COMMENT</span> <span>ON</span> <span>COLUMN</span> geonames.latitude <span>IS</span> <span>' latitude in decimal degrees (wgs84)'</span>; <span>COMMENT</span> <span>ON</span> <span>COLUMN</span> geonames.longitude <span>IS</span> <span>' longitude in decimal degrees (wgs84)'</span>; <span>COMMENT</span> <span>ON</span> <span>COLUMN</span> geonames.feature_class <span>IS</span> <span>' http://www.geonames.org/export/codes.html, char(1)'</span>; <span>COMMENT</span> <span>ON</span> <span>COLUMN</span> geonames.feature_code <span>IS</span> <span>' http://www.geonames.org/export/codes.html, varchar(10)'</span>; <span>COMMENT</span> <span>ON</span> <span>COLUMN</span> geonames.country <span>IS</span> <span>' ISO-3166 2-letter country code, 2 characters'</span>; <span>COMMENT</span> <span>ON</span> <span>COLUMN</span> geonames.cc2 <span>IS</span> <span>' alternate country codes, comma separated, ISO-3166 2-letter country code, 200 characters'</span>; <span>COMMENT</span> <span>ON</span> <span>COLUMN</span> geonames.admin1 <span>IS</span> <span>'
 fipscode (subject to change to iso code), see exceptions below, see 
file admin1Codes.txt for display names of this code; varchar(20)'</span>; <span>COMMENT</span> <span>ON</span> <span>COLUMN</span> geonames.admin2 <span>IS</span> <span>' code for the second administrative division, a county in the US, see file admin2Codes.txt; varchar(80) '</span>; <span>COMMENT</span> <span>ON</span> <span>COLUMN</span> geonames.admin3 <span>IS</span> <span>' code for third level administrative division, varchar(20)'</span>; <span>COMMENT</span> <span>ON</span> <span>COLUMN</span> geonames.admin4 <span>IS</span> <span>' code for fourth level administrative division, varchar(20)'</span>; <span>COMMENT</span> <span>ON</span> <span>COLUMN</span> geonames.population <span>IS</span> <span>' bigint (8 byte int) '</span>; <span>COMMENT</span> <span>ON</span> <span>COLUMN</span> geonames.elevation <span>IS</span> <span>' in meters, integer'</span>; <span>COMMENT</span> <span>ON</span> <span>COLUMN</span> geonames.dem <span>IS</span> <span>'
 digital elevation model, srtm3 or gtopo30, average elevation of 3''x3''
 (ca 90mx90m) or 30''x30'' (ca 900mx900m) area in meters, integer. srtm 
processed by cgiar/ciat.'</span>; <span>COMMENT</span> <span>ON</span> <span>COLUMN</span> geonames.timezone <span>IS</span> <span>' the iana timezone id (see file timeZone.txt) varchar(40)'</span>; <span>COMMENT</span> <span>ON</span> <span>COLUMN</span> geonames.modification <span>IS</span> <span>' date of last modification in yyyy-MM-dd format'</span>; </code><code>" <span>#&lt;-- Don't forget the closing quote</span> </code><h2>ETL</h2>
<code>wget http://download.geonames.org/<span>export</span>/dump/allCountries.zip unzip allCountries.zip <span># do this, and go get a coffee. This took nearly an hour</span> <span># there will be a few lines that fail, they don't really matter much</span> IFS=$<span>'\n'</span> <span>for</span> line <span>in</span> $(&lt;allCountries.txt) <span>do</span> <span>echo</span> -n <span>"<span>$line</span>"</span> | psql -qtAc </code><code> <span>"COPY geonames FROM STDIN WITH CSV DELIMITER E'<span>\t</span>';"</span> </code><code><span>2&gt; </span>errors.txt done </code><h2>Clean up and Set up</h2>
<p>Everything else we do from inside psql:</p>
<code><span>psql</span> </code><code><span>-- This command requires the installation</span> <span>-- of postgis2 from your OS package manager.</span> <span>-- For OS/X that was `port install postgresql12-postgis2`</span> <span>-- it will be something similar on most platforms.</span> <span>-- (e.g. apt-get install postgresql12-postgis2, </span> <span>-- yum -y install postgresql12-postgis2, etc.)</span> <span>CREATE</span> EXTENSION postgis; <span>CREATE</span> EXTENSION postgis_topology; <span>ALTER</span> <span>TABLE</span> geonames <span>ADD</span> <span>COLUMN</span> location point; <span>-- Go get another cup of coffee, this is going to rewrite the entire table with the new geo column.</span> <span>UPDATE</span> geonames <span>SET</span> location = (<span>'('</span> || latitude || <span>', '</span> || longitude || <span>')'</span>)::point; <span>DELETE</span> <span>FROM</span> geonames <span>WHERE</span> latitude <span>IS</span> <span>NULL</span> <span>or</span> longitude <span>IS</span> <span>NULL</span>; <span>-- DELETE 32 -- In my case, this ETL anomoly was too small</span> <span>-- to bother fixing the records</span> <span>-- Bloat removal from the update and delete operations</span> CLUSTER geonames USING geonames_pkey; </code><p class="rm-manual"><span>Tags:<span> <a href="https://www.2ndquadrant.com/en/blog/tag/pg12/" rel="tag">PG12</a>, <a href="https://www.2ndquadrant.com/en/blog/tag/postgres/" rel="tag">postgres</a>, <a href="https://www.2ndquadrant.com/en/blog/tag/postgresql-12/" rel="tag">PostgreSQL 12</a></span></span></p>
<p class="rm-manual"> <span>10</span> <span>replies</span> </p>
<ol class="rm-manual"> <li class="rm-manual"> <article class="rm-manual"> <p class="rm-manual"> Andreas Joseph Krogh <span>says:</span> </p><p class="rm-manual"> <a href="https://www.2ndquadrant.com/en/blog/postgresql-12-implementing-k-nearest-neighbor-space-partitioned-generalized-search-tree-indexes/#comment-28148"> November 6, 2019 at 9:12 am </a> </p> <p class="rm-manual"> </p><p class="rm-manual">You
 misinterpreted the execution-time; ‚Äú.939 ms‚Äù is less than 1 
*millisecond*, so the effects of having these indexes are even better 
than what you describe.</p> <a rel="nofollow" href="#comment-28148">Reply</a> <p class="rm-manual"></p> <p class="rm-manual"></p> </article> </li> <li class="rm-manual"> <article class="rm-manual"> <p class="rm-manual"> Pedro Romano <span>says:</span> </p><p class="rm-manual"> <a href="https://www.2ndquadrant.com/en/blog/postgresql-12-implementing-k-nearest-neighbor-space-partitioned-generalized-search-tree-indexes/#comment-28165"> November 6, 2019 at 12:11 pm </a> </p> <p class="rm-manual"> </p><p class="rm-manual">‚ÄúThe actual time taken was .939 seconds (nine tenths of a second), which compares to the 2.5 seconds of the original query.‚Äù</p> <p class="rm-manual">I
 believe it‚Äôs better than that. The timings on the query plan are shown 
in milliseconds. ‚ÄúExecution Time: 0.939 ms‚Äù is actually nine tenths of a
 millisecond, not of a second.</p> <a rel="nofollow" href="#comment-28165">Reply</a> <p class="rm-manual"></p> <p class="rm-manual"></p> </article> </li> <li class="rm-manual"> <article class="rm-manual"> <p class="rm-manual"> foo bar <span>says:</span> </p><p class="rm-manual"> <a href="https://www.2ndquadrant.com/en/blog/postgresql-12-implementing-k-nearest-neighbor-space-partitioned-generalized-search-tree-indexes/#comment-28417"> November 7, 2019 at 5:47 pm </a> </p> <p class="rm-manual"> </p><p class="rm-manual">I
 noticed that the planning and execution times in the explain output are
 in ms, yet the stated values in the article are in seconds (‚Äúnine 
tenths of a second‚Äù ‚Äì&gt; ‚Äúnine tenths of a millisecond‚Äù) ‚Äî the speedup 
is therefore 1000x better than claimed!</p> <a rel="nofollow" href="#comment-28417">Reply</a> <p class="rm-manual"></p> <p class="rm-manual"></p> </article> </li> <li class="rm-manual"> <article class="rm-manual"> <p class="rm-manual"> <a rel="nofollow" href="https://productops.com/">Miles Elam</a> <span>says:</span> </p><p class="rm-manual"> <a href="https://www.2ndquadrant.com/en/blog/postgresql-12-implementing-k-nearest-neighbor-space-partitioned-generalized-search-tree-indexes/#comment-28422"> November 7, 2019 at 6:25 pm </a> </p> <p class="rm-manual"> </p><p class="rm-manual">While
 the unindexed time is impressive for the lack of index, the GIST and 
SP-GIST times are not . 939 sec and .358 sec. All times are in 
*milliseconds*. GIST returns in slightly less than 1ms, not 1s. SP-GIST 
returns in 1/3 of a millisecond.</p> <p class="rm-manual">Performance for GIST and SP-GIST are in fact three orders of magnitude better than what you summarized!</p> <a rel="nofollow" href="#comment-28422">Reply</a> <p class="rm-manual"></p> <p class="rm-manual"></p> </article> </li> <li class="rm-manual"> <article class="rm-manual"> <p class="rm-manual"> Kirk Roybal <span>says:</span> </p><p class="rm-manual"> <a href="https://www.2ndquadrant.com/en/blog/postgresql-12-implementing-k-nearest-neighbor-space-partitioned-generalized-search-tree-indexes/#comment-28425"> November 7, 2019 at 6:48 pm </a> </p> <p class="rm-manual"> </p><p class="rm-manual">Several
 astute readers have noted that the query times were in milliseconds, 
not seconds. I gladly accept the fact that the results are 1000x better 
than anticipated üôÇ</p> <a rel="nofollow" href="#comment-28425">Reply</a> <p class="rm-manual"></p> <p class="rm-manual"></p> </article> </li> <li class="rm-manual"> <article class="rm-manual"> <p class="rm-manual"> <a rel="nofollow" href="https://www.seabre.com/">Sean Brewer</a> <span>says:</span> </p><p class="rm-manual"> <a href="https://www.2ndquadrant.com/en/blog/postgresql-12-implementing-k-nearest-neighbor-space-partitioned-generalized-search-tree-indexes/#comment-29572"> November 13, 2019 at 11:19 pm </a> </p> <p class="rm-manual"> </p><p class="rm-manual">It looks like you used Postgres‚Äô native Point type (<a href="https://www.postgresql.org/docs/12/datatype-geometric.html" rel="nofollow ugc">https://www.postgresql.org/docs/12/datatype-geometric.html</a>) and not the PostGIS point type?</p> <a rel="nofollow" href="#comment-29572">Reply</a> <p class="rm-manual"></p> <p class="rm-manual"></p> </article> <ul class="rm-manual"> <li class="rm-manual"> <article class="rm-manual"> <p class="rm-manual"> Kirk Roybal <span>says:</span> </p><p class="rm-manual"> <a href="https://www.2ndquadrant.com/en/blog/postgresql-12-implementing-k-nearest-neighbor-space-partitioned-generalized-search-tree-indexes/#comment-29713"> November 14, 2019 at 4:55 pm </a> </p> <p class="rm-manual"> </p><p class="rm-manual">Yes,
 this rather simple example would work without Postgis. I realized after
 publication that keeping it simple, well, kept it simpler than I 
thought.</p> <a rel="nofollow" href="#comment-29713">Reply</a> <p class="rm-manual"></p> <p class="rm-manual"></p> </article> <ul class="rm-manual"> <li class="rm-manual"> <article class="rm-manual"> <p class="rm-manual"> Olivier <span>says:</span> </p><p class="rm-manual"> <a href="https://www.2ndquadrant.com/en/blog/postgresql-12-implementing-k-nearest-neighbor-space-partitioned-generalized-search-tree-indexes/#comment-32222"> December 1, 2019 at 6:29 pm </a> </p> <p class="rm-manual"> </p><p class="rm-manual">Then why ‚ÄúCREATE EXTENSION postgis‚Äù?</p> <a rel="nofollow" href="#comment-32222">Reply</a> <p class="rm-manual"></p> <p class="rm-manual"></p> </article> </li> </ul> </li> </ul> </li> <li class="rm-manual"> <article class="rm-manual"> <p class="rm-manual"> Amul <span>says:</span> </p><p class="rm-manual"> <a href="https://www.2ndquadrant.com/en/blog/postgresql-12-implementing-k-nearest-neighbor-space-partitioned-generalized-search-tree-indexes/#comment-63640"> May 15, 2020 at 9:20 am </a> </p> <p class="rm-manual"> </p><p class="rm-manual">Hi,</p> <p class="rm-manual">Thanks for the article. </p> <p class="rm-manual">Just
 wanted to check whether this technique is ready for production usage. 
Or does it need further fine tuning for a low to medium scale?</p> <a rel="nofollow" href="#comment-63640">Reply</a> <p class="rm-manual"></p> <p class="rm-manual"></p> </article> </li> <li class="rm-manual"> <article class="rm-manual"> <p class="rm-manual"> <a rel="nofollow" href="http://triphobo.com/">Irshad Khan</a> <span>says:</span> </p><p class="rm-manual"> <a href="https://www.2ndquadrant.com/en/blog/postgresql-12-implementing-k-nearest-neighbor-space-partitioned-generalized-search-tree-indexes/#comment-91126"> September 10, 2020 at 12:31 pm </a> </p> <p class="rm-manual"> </p><p class="rm-manual">SP-GiST
 indexes cannot be used for sorting and for support of the unique 
constraint. Additionally, indexes like this cannot be created on several
 columns (unlike GiST). But it is permitted to use such indexes to 
support exclusion constraints. The difference from GiST here is that 
clustering is impossible.</p> <a rel="nofollow" href="#comment-91126">Reply</a> <p class="rm-manual"></p> <p class="rm-manual"></p> </article> </li> </ol>
<h3 class="rm-manual">Leave a Reply</h3>
<p class="rm-manual"><span>Want to join the discussion? Feel free to contribute!</span> </p>
<h3 class="rm-manual">Leave a Reply <a rel="nofollow" href="file:///en/blog/postgresql-12-implementing-k-nearest-neighbor-space-partitioned-generalized-search-tree-indexes/#respond">Cancel reply</a>
</h3>
<p class="rm-manual"><span>Your email address will not be published.</span> Required fields are marked <span>*</span></p>
<p class="rm-manual">Name <span>*</span> </p>
<p class="rm-manual">Email <span>*</span> </p>
<p class="rm-manual">Website </p>
<p class="rm-manual">Comment </p>
<h3 class="rm-manual">Search</h3>
<h4 class="rm-manual">Get in touch with us!</h4>
<h3 class="rm-manual">Recent Posts</h3>
<ul class="rm-manual"> <li class="rm-manual"> <a href="https://www.2ndquadrant.com/en/blog/random-data/">Random Data</a> <span>December 3, 2020</span> </li> <li class="rm-manual"> <a href="https://www.2ndquadrant.com/en/blog/webinar-commit-without-fear-the-beauty-of-camo-follow-up/">Webinar: COMMIT Without Fear ‚Äì The Beauty of CAMO [Follow Up]</a> <span>November 13, 2020</span> </li> <li class="rm-manual"> <a href="https://www.2ndquadrant.com/en/blog/full-text-search-since-postgresql-8-3/">Full-text search since PostgreSQL 8.3</a> <span>November 5, 2020</span> </li> <li class="rm-manual"> <a href="https://www.2ndquadrant.com/en/blog/random-numbers/">Random numbers</a> <span>November 3, 2020</span> </li> <li class="rm-manual"> <a href="https://www.2ndquadrant.com/en/blog/webinar-best-practices-for-bulk-data-loading-in-postgresql-follow-up/">Webinar: Best Practices for Bulk Data Loading in PostgreSQL [Follow Up]</a> <span>November 2, 2020</span> </li> </ul>
<h3 class="rm-manual">Featured External Blogs</h3>
<p class="rm-manual"><a href="https://blog.pgaddict.com/">Tomas Vondra's Blog</a></p>
<h3 class="rm-manual">Our Bloggers</h3>
<ul class="rm-manual"> <li class="rm-manual"><a href="file:///blog/author/simon-riggs/">Simon Riggs</a></li> <li class="rm-manual"><a href="file:///blog/author/alvherre/">Alvaro Herrera</a></li> <li class="rm-manual"><a href="file:///blog/author/andrew-dunstan/">Andrew Dunstan</a></li> <li class="rm-manual"><a href="file:///blog/author/craig-ringer/">Craig Ringer</a></li> <li class="rm-manual"><a href="file:///blog/author/francesco-canovai/">Francesco Canovai</a></li> <li class="rm-manual"><a href="file:///blog/author/gabriele-bartolini/">Gabriele Bartolini</a></li> <li class="rm-manual"><a href="file:///blog/author/giulio-calacoci/">Giulio Calacoci</a></li> <li class="rm-manual"><a href="file:///blog/author/ian-barwick//">Ian Barwick</a></li> <li class="rm-manual"><a href="file:///blog/author/marco-nenciarini/">Marco Nenciarini</a></li> <li class="rm-manual"><a href="file:///blog/author/mark-wong/">Mark Wong</a></li> <li class="rm-manual"><a href="file:///blog/author/pavan-deolasee/">Pavan Deolasee</a></li> <li class="rm-manual"><a href="file:///blog/author/petr-jelinek/">Petr Jelinek</a></li> <li class="rm-manual"><a href="file:///blog/author/shaun-thomas/">Shaun Thomas</a></li> <li class="rm-manual"><a href="file:///blog/author/tomas-vondra/">Tomas Vondra</a></li> <li class="rm-manual"><a href="file:///blog/author/umair/">Umair Shahid</a></li> </ul>
<h3 class="rm-manual">PostgreSQL Cloud</h3>
<p class="rm-manual"><a href="https://www.2ndquadrant.com/en/blog/tag/2qlovespg/">2QLovesPG</a> <a href="https://www.2ndquadrant.com/en/blog/tag/2uda/">2UDA</a> <a href="https://www.2ndquadrant.com/en/blog/tag/9-6/">9.6</a> <a href="https://www.2ndquadrant.com/en/blog/tag/backup/">backup</a> <a href="https://www.2ndquadrant.com/en/blog/tag/barman/">Barman</a> <a href="https://www.2ndquadrant.com/en/blog/tag/bdr/">BDR</a> <a href="https://www.2ndquadrant.com/en/blog/tag/business-continuity/">Business Continuity</a> <a href="https://www.2ndquadrant.com/en/blog/tag/community/">community</a> <a href="https://www.2ndquadrant.com/en/blog/tag/conference/">conference</a> <a href="https://www.2ndquadrant.com/en/blog/tag/database/">database</a> <a href="https://www.2ndquadrant.com/en/blog/tag/dba/">DBA</a> <a href="https://www.2ndquadrant.com/en/blog/tag/development/">development</a> <a href="https://www.2ndquadrant.com/en/blog/tag/devops/">devops</a> <a href="https://www.2ndquadrant.com/en/blog/tag/disaster-recovery/">disaster recovery</a> <a href="https://www.2ndquadrant.com/en/blog/tag/greenplum-2/">greenplum</a> <a href="https://www.2ndquadrant.com/en/blog/tag/hot-standby/">Hot Standby</a> <a href="https://www.2ndquadrant.com/en/blog/tag/json/">JSON</a> <a href="https://www.2ndquadrant.com/en/blog/tag/jsonb/">JSONB</a> <a href="https://www.2ndquadrant.com/en/blog/tag/logical-replication/">logical replication</a> <a href="https://www.2ndquadrant.com/en/blog/tag/monitoring/">monitoring</a> <a href="https://www.2ndquadrant.com/en/blog/tag/omnidb/">OmniDB</a> <a href="https://www.2ndquadrant.com/en/blog/tag/open-source/">open source</a> <a href="https://www.2ndquadrant.com/en/blog/tag/orange/">Orange</a> <a href="https://www.2ndquadrant.com/en/blog/tag/performance/">performance</a> <a href="https://www.2ndquadrant.com/en/blog/tag/pg12/">PG12</a> <a href="https://www.2ndquadrant.com/en/blog/tag/pgbarman/">pgbarman</a> <a href="https://www.2ndquadrant.com/en/blog/tag/pglogical/">pglogical</a> <a href="https://www.2ndquadrant.com/en/blog/tag/pg-phriday/">PG Phriday</a> <a href="https://www.2ndquadrant.com/en/blog/tag/postgres/">postgres</a> <a href="https://www.2ndquadrant.com/en/blog/tag/postgres-bdr/">Postgres-BDR</a> <a href="https://www.2ndquadrant.com/en/blog/tag/postgres-xl/">postgres-xl</a> <a href="https://www.2ndquadrant.com/en/blog/tag/postgresql/">PostgreSQL</a> <a href="https://www.2ndquadrant.com/en/blog/tag/postgresql-9-6/">PostgreSQL 9.6</a> <a href="https://www.2ndquadrant.com/en/blog/tag/postgresql10/">PostgreSQL10</a> <a href="https://www.2ndquadrant.com/en/blog/tag/postgresql11/">PostgreSQL11</a> <a href="https://www.2ndquadrant.com/en/blog/tag/postgresql-11/">PostgreSQL 11</a> <a href="https://www.2ndquadrant.com/en/blog/tag/postgresql-11-new-features/">PostgreSQL 11 New Features</a> <a href="https://www.2ndquadrant.com/en/blog/tag/postgresql-repmgr/">postgresql repmgr</a> <a href="https://www.2ndquadrant.com/en/blog/tag/recovery/">Recovery</a> <a href="https://www.2ndquadrant.com/en/blog/tag/replication/">replication</a> <a href="https://www.2ndquadrant.com/en/blog/tag/security/">security</a> <a href="https://www.2ndquadrant.com/en/blog/tag/sql/">sql</a> <a href="https://www.2ndquadrant.com/en/blog/tag/wal/">wal</a> <a href="https://www.2ndquadrant.com/en/blog/tag/webinar/">webinar</a> <a href="https://www.2ndquadrant.com/en/blog/tag/webinars/">webinars</a></p>
<h3 class="rm-manual"><a href="https://www.2ndquadrant.com/en/services/"><span>Support &amp; Services</span></a></h3>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/support/support-postgresql/">24/7 Production Support</a></span></p>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/support/support-developer/">Developer Support</a></span></p>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/services/rdba/">Remote DBA for PostgreSQL</a></span></p>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/services/monitoring-service/">PostgreSQL Database Monitoring</a></span></p>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/services/postgresql-healthcheck/">PostgreSQL Health Check</a></span></p>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/services/postgresql-performance-tuning/">PostgreSQL Performance Tuning</a></span></p>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/services/postgresql-security-audit/">Database Security Audit</a></span></p>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/services/upgrade-postgresql/">Upgrade PostgreSQL</a></span></p>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/services/postgresql-migration-assessment/">PostgreSQL Migration Assessment</a></span></p>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/services/migrate-from-oracle-to-postgresql/">Migrate from Oracle to PostgreSQL</a></span></p>
<h3 class="rm-manual"><a href="https://www.2ndquadrant.com/en/resources/"><span>Products</span></a></h3>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/resources/highly-available-postgresql-clusters/">HA Postgres Clusters</a></span></p>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/resources/postgres-bdr-2ndquadrant/">Postgres-BDR¬Æ</a></span></p>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/resources/2ndqpostgres/">2ndQPostgres</a></span></p>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/resources/pglogical/">pglogical</a></span></p>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/resources/repmgr/">repmgr</a></span></p>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/resources/barman/">Barman</a></span></p>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/resources/postgres-cloud-manager/">Postgres Cloud Manager</a></span></p>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/resources/postgresql-security-firewall/">SQL Firewall</a></span></p>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/resources/postgres-xl/">Postgres-XL</a></span></p>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/resources/omnidb/">OmniDB</a></span></p>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/resources/postgresql-installer-2ndquadrant/">Postgres Installer</a></span></p>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/resources/2uda/">2UDA</a></span></p>
<h3 class="rm-manual"><a href="https://www.2ndquadrant.com/en/postgres-learning-center/"><span>Postgres Learning Center</span></a></h3>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/postgresql/">Introducing Postgres</a></span></p>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/blog/">Blog</a></span></p>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/webinars/">Webinars</a></span></p>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/books/">Books</a></span></p>
<p class="rm-manual"><span><a href="https://www.youtube.com/2ndquadrantpostgresql">Videos</a></span></p>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/training/">Training</a></span></p>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/case-studies/">Case Studies</a></span></p>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/events/">Events</a></span></p>
<h3 class="rm-manual"><a href="https://www.2ndquadrant.com/en/about-2ndquadrant/"><span>About Us</span></a></h3>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/about-2ndquadrant/">About 2ndQuadrant</a></span></p>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/what-does-2ndquadrant-mean/">What does 2ndQuadrant Mean?</a></span></p>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/news/">News</a></span></p>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/careers/">Careers </a></span></p>
<p class="rm-manual"><span><a href="https://www.2ndquadrant.com/en/team-profile/">Team Profile</a></span></p>
<p class="rm-manual"> <span>¬© 2ndQuadrant Ltd. All rights reserved. | <a href="https://www.2ndquadrant.com/en/privacy-policy/">Privacy Policy</a></span> </p>
<p class="rm-manual"> <span>√ó</span> </p></article>
</body></html>